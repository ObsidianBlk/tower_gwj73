extends Node
class_name FSMState

# ------------------------------------------------------------------------------
# Signals
# ------------------------------------------------------------------------------
signal state_change_requested(state_name : StringName, data : Dictionary)
signal state_exited()

# ------------------------------------------------------------------------------
# Constants and ENUMs
# ------------------------------------------------------------------------------


# ------------------------------------------------------------------------------
# Export Variables
# ------------------------------------------------------------------------------


# ------------------------------------------------------------------------------
# Variables
# ------------------------------------------------------------------------------
var host : Node = null:			set=set_host

# ------------------------------------------------------------------------------
# Onready Variables
# ------------------------------------------------------------------------------


# ------------------------------------------------------------------------------
# Setters / Getters
# ------------------------------------------------------------------------------
func set_host(h : Node) -> void:
	host = h

# ------------------------------------------------------------------------------
# Override Methods
# ------------------------------------------------------------------------------


# ------------------------------------------------------------------------------
# Private Methods
# ------------------------------------------------------------------------------

# ------------------------------------------------------------------------------
# "Virtual" Public Methods
# ------------------------------------------------------------------------------
func enter(_data : Dictionary = {}) -> void:
	pass

func exit() -> void:
	var ex : Callable = func():
		state_exited.emit()
	ex.call_deferred()

func handle_input(event : InputEvent) -> void:
	pass

func update(_delta : float) -> void:
	pass

func physics_update(_delta : float) -> void:
	pass

# ------------------------------------------------------------------------------
# Public Methods
# ------------------------------------------------------------------------------
func request_state_change(state_name : StringName, data : Dictionary = {}) -> void:
	state_change_requested.emit(state_name, data)

# ------------------------------------------------------------------------------
# Handler Methods
# ------------------------------------------------------------------------------
